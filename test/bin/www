#!/usr/bin/env node
'use strict';

var app = require('../app'),
    program = require('commander'),
    http = require('http');

program
  .option('-p, --port <number>', 'specify the port number', parseInt)
  .parse(process.argv);

app.set('port', program.port || 3000);
var server = http.createServer(app);
server.listen(app.get('port'));

server.on('listening', () => {
  var addr = server.address();
  var bind = (typeof addr === 'string' ? 'pipe ' + addr : 'port ' + addr.port);
  console.log('Listening on ' + bind);
});
